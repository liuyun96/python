# -*- coding: gbk -*-
'''
本实例完成淘宝的类目信息抓取。
'''

import urllib2
import MySQLdb
import json
import urllib
import sys 
import time
reload(sys)
sys.setdefaultencoding('utf-8') #@UndefinedVariable
data ={
    "sid":'',
    "path":'next'
}
def processCategory(cat):
    #取其子类目，并递归调用processCategory
    if cat!=None:
        data["sid"]= cat['sid']
    req = urllib2.Request(
        url='http://upload.taobao.com/auction/json/reload_cats.htm?isB2CSeller=false&is3CSeller=false&isAdultSeller=false&isSynergicSeller=false&isAutoCC=false&isAliMall=false&_input_charset=utf-8',
        data=urllib.urlencode(data),
        headers=headers)
    count = 1
    while(count<10):
        try:
            content = urllib2.urlopen(req).read()
            time.sleep(0.5)
            break;
        except:
            print sys.exc_info() #print all traceback exceptions, for debugging    
            time.sleep(2)
            count=count+1

    #content = "{\"num\": 1, \"data\": {\"cate0\": {\"shopType\": 0, \"data\": {\"50023804\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5bb6\u5c45\u670d\u52a1\", \"spuid\": 0, \"spell\": \"jjfw\", \"OkPro\": \"-1\", \"sid\": \"50023804\"}, \"50004958\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u79fb\u52a8/\u8054\u901a/\u7535\u4fe1\u5145\u503c\u4e2d\u5fc3\", \"spuid\": 0, \"spell\": \"yd lt dxczzx\", \"OkPro\": \"-1\", \"sid\": \"50004958\"}, \"50006843\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5973\u978b\", \"spuid\": 0, \"spell\": \"nx\", \"OkPro\": \"-1\", \"sid\": \"50006843\"}, \"50022517\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5b55\u5987\u88c5/\u5b55\u4ea7\u5987\u7528\u54c1/\u8425\u517b\", \"spuid\": 0, \"spell\": \"yfz ycfyp yy\", \"OkPro\": \"-1\", \"sid\": \"50022517\"}, \"50002768\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u4e2a\u4eba\u62a4\u7406/\u4fdd\u5065/\u6309\u6469\u5668\u6750\", \"spuid\": 0, \"spell\": \"grhl bj amqc\", \"OkPro\": \"-1\", \"sid\": \"50002768\"}, \"25\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u73a9\u5177/\u6a21\u578b/\u52a8\u6f2b/\u65e9\u6559/\u76ca\u667a\", \"spuid\": 0, \"spell\": \"wj mx dm zj yz\", \"OkPro\": \"-1\", \"sid\": \"25\"}, \"26\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u6c7d\u8f66/\u7528\u54c1/\u914d\u4ef6/\u6539\u88c5/\u6469\u6258\", \"spuid\": 0, \"spell\": \"qc yp pj gz mt\", \"OkPro\": \"-1\", \"sid\": \"26\"}, \"27\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5bb6\u88c5\u4e3b\u6750\", \"spuid\": 0, \"spell\": \"jzzc\", \"OkPro\": \"-1\", \"sid\": \"27\"}, \"20\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7535\u73a9/\u914d\u4ef6/\u6e38\u620f/\u653b\u7565\", \"spuid\": 0, \"spell\": \"dw pj yx gl\", \"OkPro\": \"-1\", \"sid\": \"20\"}, \"21\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5c45\u5bb6\u65e5\u7528/\u6536\u7eb3/\u793c\u54c1\", \"spuid\": 0, \"spell\": \"jjry sn lp\", \"OkPro\": \"-1\", \"sid\": \"21\"}, \"23\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u53e4\u8463/\u90ae\u5e01/\u5b57\u753b/\u6536\u85cf\", \"spuid\": 0, \"spell\": \"gd yb zh sc\", \"OkPro\": \"-1\", \"sid\": \"23\"}, \"50019231\": {\"status\": 0, \"leaf\": \"2\", \"name\": \"\u7c7b\u76ee\u6d4b\u8bd5110\", \"spuid\": 0, \"spell\": \"lmcs110\", \"OkPro\": \"-1\", \"sid\": \"50019231\"}, \"28\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"ZIPPO/\u745e\u58eb\u519b\u5200/\u773c\u955c\", \"spuid\": 0, \"spell\": \"zippo rsjd yj\", \"OkPro\": \"-1\", \"sid\": \"28\"}, \"29\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5ba0\u7269/\u5ba0\u7269\u98df\u54c1\u53ca\u7528\u54c1\", \"spuid\": 0, \"spell\": \"cw cwspjyp\", \"OkPro\": \"-1\", \"sid\": \"29\"}, \"50002766\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u96f6\u98df/\u575a\u679c/\u8336\u53f6/\u7279\u4ea7\", \"spuid\": 0, \"spell\": \"ls jg cy tc\", \"OkPro\": \"-1\", \"sid\": \"50002766\"}, \"50011972\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5f71\u97f3\u7535\u5668\", \"spuid\": 0, \"spell\": \"yydq\", \"OkPro\": \"-1\", \"sid\": \"50011972\"}, \"50024971\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u65b0\u8f66/\u4e8c\u624b\u8f66\", \"spuid\": 0, \"spell\": \"xc esc\", \"OkPro\": \"-1\", \"sid\": \"50024971\"}, \"50012029\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u8fd0\u52a8\u978bnew\", \"spuid\": 0, \"spell\": \"ydxnew\", \"OkPro\": \"-1\", \"sid\": \"50012029\"}, \"50008075\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u6f14\u51fa/\u5403\u559d\u73a9\u4e50\u6298\u6263\u5238\", \"spuid\": 0, \"spell\": \"yc chwlzkq\", \"OkPro\": \"-1\", \"sid\": \"50008075\"}, \"50023575\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u623f\u4ea7/\u79df\u623f/\u65b0\u623f/\u4e8c\u624b\u623f/\u59d4\u6258\u670d\u52a1\", \"spuid\": 0, \"spell\": \"fc zf xf esf wtfw\", \"OkPro\": \"-1\", \"sid\": \"50023575\"}, \"50008825\": {\"status\": 0, \"leaf\": \"2\", \"name\": \"\u4fdd\u5065\u54c1/\u6ecb\u8865\u54c1\", \"spuid\": 0, \"spell\": \"bjp zbp\", \"OkPro\": \"-1\", \"sid\": \"50008825\"}, \"50016422\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7cae\u6cb9/\u852c\u679c/\u5e72\u8d27/\u901f\u98df/\u6c34\u4ea7/\u9884\u5b9a\", \"spuid\": 0, \"spell\": \"ly sg gh ss sc yd\", \"OkPro\": \"-1\", \"sid\": \"50016422\"}, \"50008907\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u624b\u673a\u53f7\u7801/\u5957\u9910/\u589e\u503c\u4e1a\u52a1\", \"spuid\": 0, \"spell\": \"sjhm tc zzyw\", \"OkPro\": \"-1\", \"sid\": \"50008907\"}, \"50017759\": {\"status\": 0, \"leaf\": \"1\", \"name\": \"\u7535\u89c6\", \"spuid\": 0, \"spell\": \"ds\", \"OkPro\": \"-1\", \"sid\": \"50017759\"}, \"1705\": {\"status\": 0, \"leaf\": \"2\", \"name\": \"\u9970\u54c1/\u6d41\u884c\u9996\u9970/\u65f6\u5c1a\u9970\u54c1\", \"spuid\": 0, \"spell\": \"sp lxss sssp\", \"OkPro\": \"-1\", \"sid\": \"1705\"}, \"16\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5973\u88c5/\u5973\u58eb\u7cbe\u54c1\", \"spuid\": 0, \"spell\": \"nz nsjp\", \"OkPro\": \"-1\", \"sid\": \"16\"}, \"1410\": {\"status\": 0, \"leaf\": \"1\", \"name\": \"\u5185\u5b58\u5361/U\u76d8/\u79fb\u52a8\u5b58\u50a8\", \"spuid\": 0, \"spell\": \"nck up ydcc\", \"OkPro\": \"-1\", \"sid\": \"1410\"}, \"50020179\": {\"status\": 0, \"leaf\": \"1\", \"name\": \"\u6d4b\u8bd5\u4f7f\u7528\u8bf7\u53ca\u65f6\u5c4f\u853d\", \"spuid\": 0, \"spell\": \"cssyqjspb\", \"OkPro\": \"-1\", \"sid\": \"50020179\"}, \"50020485\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u4e94\u91d1/\u5de5\u5177\", \"spuid\": 0, \"spell\": \"wj gj\", \"OkPro\": \"-1\", \"sid\": \"50020485\"}, \"50024451\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5916\u5356/\u5916\u9001/\u8ba2\u9910\u670d\u52a1\", \"spuid\": 0, \"spell\": \"wm ws dcfw\", \"OkPro\": \"-1\", \"sid\": \"50024451\"}, \"50012206\": {\"status\": 0, \"leaf\": \"1\", \"name\": \"BC\u6574\u5408\u4e34\u65f6\u7c7b\u76ee\", \"spuid\": 0, \"spell\": \"bczhlslm\", \"OkPro\": \"-1\", \"sid\": \"50012206\"}, \"50005700\": {\"status\": 0, \"leaf\": \"2\", \"name\": \"\u54c1\u724c\u624b\u8868/\u6d41\u884c\u624b\u8868\", \"spuid\": 0, \"spell\": \"ppsb lxsb\", \"OkPro\": \"-1\", \"sid\": \"50005700\"}, \"50008164\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u4f4f\u5b85\u5bb6\u5177\", \"spuid\": 0, \"spell\": \"zzjj\", \"OkPro\": \"-1\", \"sid\": \"50008164\"}, \"50008165\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7ae5\u88c5/\u7ae5\u978b/\u4eb2\u5b50\u88c5\", \"spuid\": 0, \"spell\": \"tz tx qzz\", \"OkPro\": \"-1\", \"sid\": \"50008165\"}, \"50008163\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5e8a\u4e0a\u7528\u54c1/\u5e03\u827a\u8f6f\u9970\", \"spuid\": 0, \"spell\": \"csyp byrs\", \"OkPro\": \"-1\", \"sid\": \"50008163\"}, \"50013864\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u9970\u54c1/\u6d41\u884c\u9996\u9970/\u65f6\u5c1a\u9970\u54c1\u65b0\", \"spuid\": 0, \"spell\": \"sp lxss ssspx\", \"OkPro\": \"-1\", \"sid\": \"50013864\"}, \"50020808\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5de5\u827a\u9970\u54c1\", \"spuid\": 0, \"spell\": \"gysp\", \"OkPro\": \"-1\", \"sid\": \"50020808\"}, \"50017633\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"123\", \"spuid\": 0, \"spell\": \"123\", \"OkPro\": \"-1\", \"sid\": \"50017633\"}, \"50017637\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u752b\u5d69-\u6bcd\u5a74-\u76ca\u667a\u73a9\u5177\", \"spuid\": 0, \"spell\": \"f-my-yzwj\", \"OkPro\": \"-1\", \"sid\": \"50017637\"}, \"50011397\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u73e0\u5b9d/\u94bb\u77f3/\u7fe1\u7fe0/\u9ec4\u91d1\", \"spuid\": 0, \"spell\": \"zb zs c hj\", \"OkPro\": \"-1\", \"sid\": \"50011397\"}, \"50005998\": {\"status\": 0, \"leaf\": \"1\", \"name\": \"\u513f\u7ae5\u73a9\u5177/\u65e9\u6559/\u8fd0\u52a8/\u5b66\u4e60\", \"spuid\": 0, \"spell\": \"etwj zj yd xx\", \"OkPro\": \"-1\", \"sid\": \"50005998\"}, \"33\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u4e66\u7c4d/\u6742\u5fd7/\u62a5\u7eb8\", \"spuid\": 0, \"spell\": \"sj zz bz\", \"OkPro\": \"-1\", \"sid\": \"33\"}, \"30\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7537\u88c5\", \"spuid\": 0, \"spell\": \"nz\", \"OkPro\": \"-1\", \"sid\": \"30\"}, \"35\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5976\u7c89/\u8f85\u98df/\u8425\u517b\u54c1\", \"spuid\": 0, \"spell\": \"nf fs yyp\", \"OkPro\": \"-1\", \"sid\": \"35\"}, \"34\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u97f3\u4e50/\u5f71\u89c6/\u660e\u661f/\u97f3\u50cf\", \"spuid\": 0, \"spell\": \"yl ys mx yx\", \"OkPro\": \"-1\", \"sid\": \"34\"}, \"50020276\": {\"status\": 0, \"leaf\": \"2\", \"name\": \"\u54c1\u724c\u4fdd\u5065\u54c1\", \"spuid\": 0, \"spell\": \"ppbjp\", \"OkPro\": \"-1\", \"sid\": \"50020276\"}, \"50020275\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u4f20\u7edf\u6ecb\u8865\u54c1/\u5176\u4ed6\u4fdd\u5065\u8425\u517b\u54c1\", \"spuid\": 0, \"spell\": \"ctzbp qtbjyyp\", \"OkPro\": \"-1\", \"sid\": \"50020275\"}, \"50014811\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7f51\u5e97/\u7f51\u7edc\u670d\u52a1/\u8f6f\u4ef6\", \"spuid\": 0, \"spell\": \"wd wlfw rj\", \"OkPro\": \"-1\", \"sid\": \"50014811\"}, \"50014812\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5c3f\u7247/\u6d17\u62a4/\u5582\u54fa/\u63a8\u8f66\u5e8a\", \"spuid\": 0, \"spell\": \"np xh wb tcc\", \"OkPro\": \"-1\", \"sid\": \"50014812\"}, \"50018222\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u53f0\u5f0f\u673a/\u4e00\u4f53\u673a/\u670d\u52a1\u5668\", \"spuid\": 0, \"spell\": \"tsj ytj fwq\", \"OkPro\": \"-1\", \"sid\": \"50018222\"}, \"50020670\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5e03\u827a\u8f6f\u9970\", \"spuid\": 0, \"spell\": \"byrs\", \"OkPro\": \"-1\", \"sid\": \"50020670\"}, \"50018320\": {\"status\": 0, \"leaf\": \"1\", \"name\": \"\u6d4b\u8bd5\", \"spuid\": 0, \"spell\": \"cs\", \"OkPro\": \"-1\", \"sid\": \"50018320\"}, \"50020611\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5546\u4e1a/\u529e\u516c\u5bb6\u5177\", \"spuid\": 0, \"spell\": \"sy bgjj\", \"OkPro\": \"-1\", \"sid\": \"50020611\"}, \"50016349\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u53a8\u623f/\u9910\u996e\u7528\u5177\", \"spuid\": 0, \"spell\": \"cf cyyj\", \"OkPro\": \"-1\", \"sid\": \"50016349\"}, \"50016348\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u6d17\u62a4\u6c90\u6d74/\u6e05\u6d01/\u62a4\u7406\", \"spuid\": 0, \"spell\": \"xhy qj hl\", \"OkPro\": \"-1\", \"sid\": \"50016348\"}, \"50025004\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u4e2a\u6027\u5b9a\u5236/\u8bbe\u8ba1\u670d\u52a1/DIY\", \"spuid\": 0, \"spell\": \"gxdz sjfw diy\", \"OkPro\": \"-1\", \"sid\": \"50025004\"}, \"50007218\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u529e\u516c\u8bbe\u5907/\u8017\u6750/\u76f8\u5173\u670d\u52a1\", \"spuid\": 0, \"spell\": \"bgsb hc xgfw\", \"OkPro\": \"-1\", \"sid\": \"50007218\"}, \"50007216\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u9c9c\u82b1\u901f\u9012/\u82b1\u5349\u4eff\u771f/\u7eff\u690d\u56ed\u827a\", \"spuid\": 0, \"spell\": \"xhsd hhfz lzyy\", \"OkPro\": \"-1\", \"sid\": \"50007216\"}, \"50013698\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"test\", \"spuid\": 0, \"spell\": \"test\", \"OkPro\": \"-1\", \"sid\": \"50013698\"}, \"50017908\": {\"status\": 0, \"leaf\": \"2\", \"name\": \"\u5f69\u7968\", \"spuid\": 0, \"spell\": \"cp\", \"OkPro\": \"-1\", \"sid\": \"50017908\"}, \"50010404\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u670d\u9970\u914d\u4ef6/\u76ae\u5e26/\u5e3d\u5b50/\u56f4\u5dfe\", \"spuid\": 0, \"spell\": \"fspj pd mz wj\", \"OkPro\": \"-1\", \"sid\": \"50010404\"}, \"50012100\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u751f\u6d3b\u7535\u5668\", \"spuid\": 0, \"spell\": \"shdq\", \"OkPro\": \"-1\", \"sid\": \"50012100\"}, \"50010728\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u8fd0\u52a8/\u745c\u4f3d/\u5065\u8eab/\u7403\u8ff7\u7528\u54c1\", \"spuid\": 0, \"spell\": \"yd  js qmyp\", \"OkPro\": \"-1\", \"sid\": \"50010728\"}, \"50020579\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7535\u5b50/\u7535\u5de5\", \"spuid\": 0, \"spell\": \"dz dg\", \"OkPro\": \"-1\", \"sid\": \"50020579\"}, \"50023282\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7f8e\u53d1\u62a4\u53d1/\u5047\u53d1\", \"spuid\": 0, \"spell\": \"mfhf jf\", \"OkPro\": \"-1\", \"sid\": \"50023282\"}, \"50013886\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u6237\u5916/\u767b\u5c71/\u91ce\u8425/\u65c5\u884c\u7528\u54c1\", \"spuid\": 0, \"spell\": \"hw ds yy lxyp\", \"OkPro\": \"-1\", \"sid\": \"50013886\"}, \"2813\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u6210\u4eba\u7528\u54c1/\u907f\u5b55/\u8ba1\u751f\u7528\u54c1\", \"spuid\": 0, \"spell\": \"cryp by jsyp\", \"OkPro\": \"-1\", \"sid\": \"2813\"}, \"50014442\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u4ea4\u901a\u7968\", \"spuid\": 0, \"spell\": \"jtp\", \"OkPro\": \"-1\", \"sid\": \"50014442\"}, \"50018252\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7535\u5b50\u51ed\u8bc1\", \"spuid\": 0, \"spell\": \"dzpz\", \"OkPro\": \"-1\", \"sid\": \"50018252\"}, \"99\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7f51\u7edc\u6e38\u620f\u70b9\u5361\", \"spuid\": 0, \"spell\": \"wlyxdk\", \"OkPro\": \"-1\", \"sid\": \"99\"}, \"50022649\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u65b0\u623f\u9500\u552e\", \"spuid\": 0, \"spell\": \"xfxs\", \"OkPro\": \"-1\", \"sid\": \"50022649\"}, \"50012472\": {\"status\": 0, \"leaf\": \"2\", \"name\": \"\u4fdd\u5065\u98df\u54c1\", \"spuid\": 0, \"spell\": \"bjsp\", \"OkPro\": \"-1\", \"sid\": \"50012472\"}, \"11\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7535\u8111\u786c\u4ef6/\u663e\u793a\u5668/\u7535\u8111\u5468\u8fb9\", \"spuid\": 0, \"spell\": \"dnyj xsq dnzb\", \"OkPro\": \"-1\", \"sid\": \"11\"}, \"14\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u6570\u7801\u76f8\u673a/\u5355\u53cd\u76f8\u673a/\u6444\u50cf\u673a\", \"spuid\": 0, \"spell\": \"smxj dfxj sxj\", \"OkPro\": \"-1\", \"sid\": \"14\"}, \"1625\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5973\u58eb\u5185\u8863/\u7537\u58eb\u5185\u8863/\u5bb6\u5c45\u670d\", \"spuid\": 0, \"spell\": \"nsny nsny jjf\", \"OkPro\": \"-1\", \"sid\": \"1625\"}, \"50010788\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5f69\u5986/\u9999\u6c34/\u7f8e\u5986\u5de5\u5177\", \"spuid\": 0, \"spell\": \"cz xs mzgj\", \"OkPro\": \"-1\", \"sid\": \"50010788\"}, \"50025110\": {\"status\": 0, \"leaf\": \"1\", \"name\": \"\u7535\u5f71/\u6f14\u51fa/\u4f53\u80b2\u8d5b\u4e8b\", \"spuid\": 0, \"spell\": \"dy yc tyss\", \"OkPro\": \"-1\", \"sid\": \"50025110\"}, \"50018004\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7535\u5b50\u8bcd\u5178/\u7535\u7eb8\u4e66/\u6587\u5316\u7528\u54c1\", \"spuid\": 0, \"spell\": \"dzcd dzs whyp\", \"OkPro\": \"-1\", \"sid\": \"50018004\"}, \"50019780\": {\"status\": 0, \"leaf\": \"2\", \"name\": \"\u5e73\u677f\u7535\u8111/MID\", \"spuid\": 0, \"spell\": \"pbdn mid\", \"OkPro\": \"-1\", \"sid\": \"50019780\"}, \"1101\": {\"status\": 0, \"leaf\": \"2\", \"name\": \"\u7b14\u8bb0\u672c\u7535\u8111\", \"spuid\": 0, \"spell\": \"bjbdn\", \"OkPro\": \"-1\", \"sid\": \"1101\"}, \"50011949\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u9152\u5e97\u5ba2\u6808/\u666f\u70b9\u95e8\u7968/\u5ea6\u5047\u65c5\u6e38\", \"spuid\": 0, \"spell\": \"jdkz jdmp djly\", \"OkPro\": \"-1\", \"sid\": \"50011949\"}, \"1512\": {\"status\": 0, \"leaf\": \"2\", \"name\": \"\u624b\u673a\", \"spuid\": 0, \"spell\": \"sj\", \"OkPro\": \"-1\", \"sid\": \"1512\"}, \"50017760\": {\"status\": 0, \"leaf\": \"1\", \"name\": \"\u7535\u89c6\", \"spuid\": 0, \"spell\": \"ds\", \"OkPro\": \"-1\", \"sid\": \"50017760\"}, \"50022703\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5927\u5bb6\u7535\", \"spuid\": 0, \"spell\": \"djd\", \"OkPro\": \"-1\", \"sid\": \"50022703\"}, \"50018264\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7f51\u7edc\u8bbe\u5907/\u7f51\u7edc\u76f8\u5173\", \"spuid\": 0, \"spell\": \"wlsb wlxg\", \"OkPro\": \"-1\", \"sid\": \"50018264\"}, \"1201\": {\"status\": 0, \"leaf\": \"2\", \"name\": \"MP3/MP4/iPod/\u5f55\u97f3\u7b14\", \"spuid\": 0, \"spell\": \"mp3 mp4 ipod lyb\", \"OkPro\": \"-1\", \"sid\": \"1201\"}, \"50023724\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u5176\u4ed6\", \"spuid\": 0, \"spell\": \"qt\", \"OkPro\": \"-1\", \"sid\": \"50023724\"}, \"50020857\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7279\u8272\u624b\u5de5\u827a\", \"spuid\": 0, \"spell\": \"tssgy\", \"OkPro\": \"-1\", \"sid\": \"50020857\"}, \"50011699\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u8fd0\u52a8\u670d/\u8fd0\u52a8\u5305/\u9888\u73af\u914d\u4ef6\", \"spuid\": 0, \"spell\": \"ydf ydb jhpj\", \"OkPro\": \"-1\", \"sid\": \"50011699\"}, \"50012082\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u53a8\u623f\u7535\u5668\", \"spuid\": 0, \"spell\": \"cfdq\", \"OkPro\": \"-1\", \"sid\": \"50012082\"}, \"50010388\": {\"status\": 0, \"leaf\": \"2\", \"name\": \"\u8fd0\u52a8\u978b\", \"spuid\": 0, \"spell\": \"ydx\", \"OkPro\": \"-1\", \"sid\": \"50010388\"}, \"40\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u817e\u8bafQQ\u4e13\u533a\", \"spuid\": 0, \"spell\": \"txqqzq\", \"OkPro\": \"-1\", \"sid\": \"40\"}, \"50006842\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7bb1\u5305\u76ae\u5177/\u70ed\u9500\u5973\u5305/\u7537\u5305\", \"spuid\": 0, \"spell\": \"xbpj rxnb nb\", \"OkPro\": \"-1\", \"sid\": \"50006842\"}, \"50011740\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u6d41\u884c\u7537\u978b\", \"spuid\": 0, \"spell\": \"lxnx\", \"OkPro\": \"-1\", \"sid\": \"50011740\"}, \"50012164\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u95ea\u5b58\u5361/U\u76d8/\u5b58\u50a8/\u79fb\u52a8\u786c\u76d8\", \"spuid\": 0, \"spell\": \"sck up cc ydyp\", \"OkPro\": \"-1\", \"sid\": \"50012164\"}, \"50011665\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7f51\u6e38\u88c5\u5907/\u6e38\u620f\u5e01/\u5e10\u53f7/\u4ee3\u7ec3\", \"spuid\": 0, \"spell\": \"wyzb yxb zh dl\", \"OkPro\": \"-1\", \"sid\": \"50011665\"}, \"50017300\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u4e50\u5668/\u5409\u4ed6/\u94a2\u7434/\u914d\u4ef6\", \"spuid\": 0, \"spell\": \"lq jt gq pj\", \"OkPro\": \"-1\", \"sid\": \"50017300\"}, \"1801\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u7f8e\u5bb9\u62a4\u80a4/\u7f8e\u4f53/\u7cbe\u6cb9\", \"spuid\": 0, \"spell\": \"mrhf mt jy\", \"OkPro\": \"-1\", \"sid\": \"1801\"}, \"50008090\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"3C\u6570\u7801\u914d\u4ef6\u5e02\u573a\", \"spuid\": 0, \"spell\": \"3csmpjsc\", \"OkPro\": \"-1\", \"sid\": \"50008090\"}, \"50020332\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u57fa\u7840\u5efa\u6750\", \"spuid\": 0, \"spell\": \"jcjc\", \"OkPro\": \"-1\", \"sid\": \"50020332\"}, \"50023904\": {\"status\": 0, \"leaf\": \"0\", \"name\": \"\u56fd\u8d27\u7cbe\u54c1\u6570\u7801\", \"spuid\": 0, \"spell\": \"ghjpsm\", \"OkPro\": \"-1\", \"sid\": \"50023904\"}, \"50019253\": {\"status\": 0, \"leaf\": \"1\", \"name\": \"\u624b\u673a\uff08\u6d4b\u8bd5\uff09\", \"spuid\": 0, \"spell\": \"sj\uff08cs\uff09\", \"OkPro\": \"-1\", \"sid\": \"50019253\"}}, \"num\": 102, \"pName\": \"\u7c7b\u76ee\", \"inpro\": 2, \"brType\": 2, \"type\": 0}}}"
    categories = json.loads(content,"gbk")
    print json.dumps(categories)
    if(categories["num"]==0):
        return
    if(cat!=None):
        parentId = cat["sid"]
    else:
        parentId = "0"
    brType = categories["data"]["cate0"]["brType"];
    pName = categories["data"]["cate0"]["pName"];
    inPro = categories["data"]["cate0"]["inpro"];
    ctype = categories["data"]["cate0"]["type"];
    for c in categories["data"]["cate0"]["data"].values():
        if(brType==2):#类目需要进一步处理，其他则记录到此位置。
            try:
                cursor.execute("""
                    insert into TB_CAT (SID,NAME,SPELL,LEAFS,SPUID,STATUS,OKPRO,PARENT_SID,BRTYPE,PNAME,INPRO,TYPE)
                    VALUES (%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s)
                """,(c["sid"],c["name"],c["spell"],c["leaf"],c["spuid"],c["status"],c["OkPro"],parentId,brType,pName,inPro,ctype))
            except MySQLdb.Error:
                print "An error has been passed."
            processCategory(c)

headers ={
    "Cookie":"t=9078a17f0c848dcef9d4696e9640d614; cna=P6v4Bpj+RW4CAayKV3pMvMQ7; lzstat_uv=3739773219902510057|2581747@2079396@2043323@2527893@1544272@1539177@2311843@2578055@2429309@2611719@2581759@1267385@2144678@2430824@2123369@2079400@1399522@2625193@2534399@2404270@2534505@2534513@2535521@2534484@2535524@2617023@2512732@2263915@2465112@2465110@1324038@1218290@1231896@1836558@2494389@1820375@1723936@1759261; ck1=; tg=4; _cc_=WqG3DMC9EA%3D%3D; nt=VT5L2FSpc2ZyyamRMgOW%2B2YbrNGewDOuPFXXeuQHntawwdUPIMZIUMG3gqFsEA%3D%3D; tracknick=%5Cu601D%5Cu6B63%5Cu79D1%5Cu6280; ssllogin=1; x=e%3D1%26p%3D*%26s%3D0%26c%3D1%26f%3D0%26g%3D0%26t%3D0; publishItemObj=MQ%3D%3D; miid=7435400190752509613; uc2=wuf=http%3A%2F%2Ftop.43gz.com%2Fdongji%2Fextui%2Fmain%2Findex%3FnodeId%3D27&ab=u---0; __utma=97180938.14053517.1317298692.1317298692.1317298692.1; __utmz=97180938.1317298692.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); mt=cp=0&ci=1_1; cookie2=37f6ad49f2587260dd0c082427d3140c; mpp=t%3D0%26m%3D%26h%3D1317708194927%26l%3D0; __utmc=97180938; linezing_session=fRaktgT7qohLCAtPk3XfO8Yc_1317641994_110; WAPFDFDTGFG=%2B4cDp4P%2Fa8uhJPcvVPM%3D; ps=15; pic=0; tk_trace=oTRxOWSBNwn9dPyscxqAz9fIOLXBX%2BesdEq2e7JTs%2B%2FEXPRvqse0tJ9rwUzuysi9pxeWZGRIvzFLH0b63q%2BtPV4Zb4sA%2B8cRG%2F3w%2BABzowkLr3ZWhxSWJFG6kMG7Sj%2FlLNHPBgs2lu7v%2BpH7oE2VW18dXJIWGIbVY8bIihSWKVGz2Ak60G7Lz28yZ8ijrs7YPg14tMnN7CzSJXyxQ%2B1flHfKkGmEpQtr3DQ%3D; wud=wud; w_sec_step=step_wap_new; uc1=lltime=1317700171&cookie14=UoLdGHpU985TNQ%3D%3D&existShop=true&cookie16=V32FPkk%2FxXMk5UvIbNtImtMfJQ%3D%3D&sg=%E6%8A%801c&cookie21=U%2BGCWk%2F7owVBK2HhnIQ1nA%3D%3D&tag=0&cookie15=VFC%2FuZ9ayeYq2g%3D%3D; v=0; _tb_token_=dd5eb1bb05ef; _sv_=1; unb=734268441; _nk_=%5Cu601D%5Cu6B63%5Cu79D1%5Cu6280; _l_g_=Ug%3D%3D; _wwmsg_=0%2C0; lastgetwwmsg=MTMxNzcwODIwNQ%3D%3D; cookie1=B0ADLuTAjL5gxkf3qpXoTWajjVKf%2BYNlVtQzkok5iMo%3D; cookie17=VAKJCIMBXxmL; tlut=UoLdGHpU985StQ%3D%3D",
    "Referer":"http://upload.taobao.com/auction/publish/publish.htm?auction_type=b&auth_alert=true&isAliMall=false",
    "Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",
    "User-Agent":"Mozilla/5.0 (Windows NT 6.1; rv:6.0.2) Gecko/20100101 Firefox/6.0.2"
}

conn = MySQLdb.connect(host='localhost', user='root',passwd='hacker',charset = "utf8",db="tb_report", use_unicode = True)  
#获取操作游标  
conn.autocommit(True)
cursor = conn.cursor()  
processCategory(None)

